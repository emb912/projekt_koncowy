{"ast":null,"code":"import*as React from'react';import{request,setAuthHeader}from'../../axios_helper';import LoginErrorContent from'./LoginErrorContent';import WelcomeContent from'../WelcomeContent';import RegisterErrorContent from'./RegisterErrorContent';import Form from'./Form';import RegisterSuccess from'./RegisterSuccess';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";class LoginForm extends React.Component{constructor(props){super(props);this.onChangeHandler=event=>{let name=event.target.name;let value=event.target.value;this.setState({[name]:value});};this.onSubmitLogin=e=>{e.preventDefault();request(\"POST\",\"/api/v1/auth/login\",{login:this.state.login,password:this.state.password}).then(response=>{localStorage.setItem('token',response.data.token);setAuthHeader(localStorage.getItem('token'));this.props.onLogin();this.setState({componentToShow:\"welcome\"});}).catch(error=>{setAuthHeader(null);this.setState({componentToShow:\"loginerror\"});});};this.onSubmitRegister=e=>{e.preventDefault();request(\"POST\",\"/api/v1/auth/register\",{login:this.state.login,password:this.state.password}).then(response=>{localStorage.setItem('token',response.data.token);setAuthHeader(localStorage.getItem('token'));this.setState({componentToShow:\"registered\"});}).catch(error=>{setAuthHeader(null);this.setState({componentToShow:\"registererror\"});});};this.state={componentToShow:\"form\",active:\"login\",login:\"\",password:\"\"};}render(){const isLoginActive=this.state.active===\"login\";const submitButtonText=isLoginActive?\"Zaloguj się\":\"Zarejestruj się\";return/*#__PURE__*/_jsxs(_Fragment,{children:[this.state.componentToShow===\"form\"&&/*#__PURE__*/_jsx(Form,{active:this.state.active,onChange:value=>this.setState({active:value}),onSubmit:this.state.active==='login'?this.onSubmitLogin:this.onSubmitRegister,onChangeHandler:this.onChangeHandler}),this.state.componentToShow===\"welcome\"&&/*#__PURE__*/_jsx(WelcomeContent,{}),this.state.componentToShow===\"loginerror\"&&/*#__PURE__*/_jsx(LoginErrorContent,{}),this.state.componentToShow===\"registered\"&&/*#__PURE__*/_jsx(RegisterSuccess,{}),this.state.componentToShow===\"registererror\"&&/*#__PURE__*/_jsx(RegisterErrorContent,{})]});}}export default LoginForm;","map":{"version":3,"names":["React","request","setAuthHeader","LoginErrorContent","WelcomeContent","RegisterErrorContent","Form","RegisterSuccess","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LoginForm","Component","constructor","props","onChangeHandler","event","name","target","value","setState","onSubmitLogin","e","preventDefault","login","state","password","then","response","localStorage","setItem","data","token","getItem","onLogin","componentToShow","catch","error","onSubmitRegister","active","render","isLoginActive","submitButtonText","children","onChange","onSubmit"],"sources":["/Users/em/Desktop/IS/projekt_koncowy/client/src/components/auth/LoginForm.js"],"sourcesContent":["import * as React from 'react';\nimport { request, setAuthHeader } from '../../axios_helper';\nimport LoginErrorContent from './LoginErrorContent';\nimport WelcomeContent from '../WelcomeContent';\nimport RegisterErrorContent from './RegisterErrorContent';\nimport Form from './Form';\nimport RegisterSuccess from './RegisterSuccess';\n\nclass LoginForm extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            componentToShow: \"form\",\n            active: \"login\",\n            login: \"\",\n            password: \"\"\n        };\n    }\n\n\n    onChangeHandler = (event) => {\n        let name = event.target.name;\n        let value = event.target.value;\n        this.setState({ [name]: value });\n    }\n\n    onSubmitLogin = (e) => {\n        e.preventDefault();\n        request(\n            \"POST\",\n            \"/api/v1/auth/login\",\n            {\n                login: this.state.login,\n                password: this.state.password\n            }).then(\n                (response) => {\n                    localStorage.setItem('token', response.data.token);\n                    setAuthHeader(localStorage.getItem('token'));\n                    this.props.onLogin();\n                    this.setState({ componentToShow: \"welcome\" });\n                }).catch(\n                    (error) => {\n                        setAuthHeader(null);\n                        this.setState({ componentToShow: \"loginerror\" });\n                    }\n                );\n    }\n\n    onSubmitRegister = (e) => {\n        e.preventDefault();\n        request(\n            \"POST\",\n            \"/api/v1/auth/register\",\n            {\n                login: this.state.login,\n                password: this.state.password\n            }).then(\n                (response) => {\n                    localStorage.setItem('token', response.data.token);\n                    setAuthHeader(localStorage.getItem('token'));\n                    this.setState({ componentToShow: \"registered\" });\n                }).catch(\n                    (error) => {\n                        setAuthHeader(null);\n                        this.setState({ componentToShow: \"registererror\" });\n                    }\n                );\n    }\n\n    render() {\n        const isLoginActive = this.state.active === \"login\";\n        const submitButtonText = isLoginActive ? \"Zaloguj się\" : \"Zarejestruj się\";\n\n        return (\n            <>\n                {this.state.componentToShow === \"form\" &&\n                    <Form\n                        active={this.state.active}\n                        onChange={(value) => this.setState({ active: value })}\n                        onSubmit={this.state.active === 'login' ? this.onSubmitLogin : this.onSubmitRegister}\n                        onChangeHandler={this.onChangeHandler}\n                    />}\n                {this.state.componentToShow === \"welcome\" && <WelcomeContent />}\n                {this.state.componentToShow === \"loginerror\" && <LoginErrorContent />}\n                {this.state.componentToShow === \"registered\" && <RegisterSuccess />}\n                {this.state.componentToShow === \"registererror\" && <RegisterErrorContent />}\n            </>\n        );\n    }\n}\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}